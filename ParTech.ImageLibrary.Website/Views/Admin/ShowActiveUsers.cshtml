@using ParTech.ImageLibrary.Core.Repositories
@model IEnumerable<ParTech.ImageLibrary.Core.Models.UserProfile>
@{
    ViewBag.Title = "Inactive users";
}

<hgroup class="title">
    <h1>@ViewBag.Title</h1>
</hgroup>

@Html.Partial("_StatusMessage")

<section class="pagebody">

    @if (!Model.Any())
    {
        <span>
            No active users available.
        </span>
    }
    else
    {
        <table>
            <tr>
                <th>&nbsp;</th>
                <th>User name</th>
                <th>Email address</th>
                <th>Created</th>
                <th>Company</th>
                <th>Contact information</th>
                <th>Billing address</th>
            </tr>

        @foreach (var userProfile in Model)
        {
            var createdDateString = "-";
            if (userProfile.webpages_Membership.CreateDate != null)
            {
                createdDateString = userProfile.webpages_Membership.CreateDate.ToString();
            }
            <tr>
                <td>
                   @Html.AuthorizedActionLinkOrText("Deactivate user", "DeactivateUser", "Admin", new { userid = userProfile.Id }, null)
                </td>
                <td>@userProfile.UserName</td>
                <td>@userProfile.Email</td>
                <td>@createdDateString</td>
                
                @if (@userProfile.Profile != null)
                {
                    <td>@userProfile.Profile.CompanyName</td>
                    <td>
                        @userProfile.Profile.FirstName @userProfile.Profile.LastName<br />
                        E:
                        @if (!string.IsNullOrEmpty(userProfile.Profile.Email))
                        {
                            @userProfile.Profile.Email
                        }
                        else
                        {
                            @: -
                        }
                        <br />                        T: 
                        @if (!string.IsNullOrEmpty(userProfile.Profile.Telephone))
                        {
                            @userProfile.Profile.Telephone
                        }
                        else
                        {
                            @: -
                        }
                    </td>
                    <td>
                        @userProfile.Profile.Address<br />
                        @userProfile.Profile.PostalCode<br />
                        @userProfile.Profile.City<br />
                        @userProfile.Profile.CountryID
                    </td>
                }
                else
                {
                    <td>&nbsp;</td>
                    <td>&nbsp;</td>
                    <td>&nbsp;</td>
                }
            </tr>
        }

        </table>
    }
</section>

@section Scripts {
}